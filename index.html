<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Overlay de Transmissão</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            overflow: hidden; /* Evita barras de rolagem */
            background-color: rgba(0, 0, 0, 0); /* Fundo transparente para OBS */
            color: white;
            display: flex;
            flex-direction: column;
            height: 100vh;
            justify-content: space-between; /* Espaçamento entre placar, centro e cartões */
        }

        #placar {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            background-color: rgba(0, 0, 0, 0.7);
            padding: 10px 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            z-index: 10;
        }

        .time-info {
            display: flex;
            align-items: center;
            margin: 0 15px;
        }

        .time-info img {
            width: 50px;
            height: 50px;
            margin-right: 10px;
            object-fit: contain;
        }

        .time-info .nome-time {
            font-size: 1.8em;
            font-weight: bold;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8);
        }

        .gols {
            font-size: 3em;
            font-weight: bold;
            margin: 0 10px;
            color: #f39c12; /* Cor destacada para os gols */
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.8);
        }

        /* Animação de Gol */
        #animacao-gol {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(46, 204, 113, 0.9); /* Verde vibrante */
            padding: 30px 60px;
            border-radius: 15px;
            box-shadow: 0 0 25px rgba(0, 255, 0, 0.7);
            text-align: center;
            z-index: 1000;
            display: none; /* Esconde por padrão */
            opacity: 0;
            animation-duration: 3s; /* Duração total da animação */
            animation-timing-function: ease-out;
            animation-fill-mode: forwards;
        }

        #animacao-gol.show {
            animation-name: fadeInOut;
        }

        @keyframes fadeInOut {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
            10% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            90% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
        }

        #animacao-gol h1 {
            font-size: 5em;
            color: white;
            text-shadow: 3px 3px 5px rgba(0, 0, 0, 0.7);
            margin: 0;
            letter-spacing: 5px;
        }

        #animacao-gol .escudo-gol {
            width: 100px;
            height: 100px;
            margin-top: 15px;
            object-fit: contain;
            border-radius: 50%; /* Opcional: para escudos redondos */
            border: 3px solid white;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }

        /* Seção de Cartões */
        #cartoes-container {
            position: absolute;
            bottom: 20px;
            left: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 50;
        }

        .cartao {
            display: flex;
            align-items: center;
            padding: 8px 15px;
            border-radius: 8px;
            color: black;
            font-weight: bold;
            font-size: 1.1em;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.4);
            animation: slideInLeft 0.5s ease-out forwards; /* Animação ao aparecer */
            min-width: 200px; /* Largura mínima para o cartão */
        }

        .cartao.amarelo {
            background-color: #f1c40f; /* Amarelo */
        }

        .cartao.vermelho {
            background-color: #e74c3c; /* Vermelho */
            color: white; /* Texto branco para cartão vermelho */
        }

        .cartao img.escudo-time {
            width: 30px;
            height: 30px;
            margin-right: 10px;
            object-fit: contain;
        }

        .cartao .icone-cartao {
            width: 25px;
            height: 25px;
            margin-left: 10px;
            object-fit: contain;
        }

        @keyframes slideInLeft {
            from {
                transform: translateX(-100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOutLeft {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(-100%);
                opacity: 0;
            }
        }
    </style>
</head>
<body>

    <div id="placar">
        <div class="time-info">
            <img id="escudoCasa" src="https://via.placeholder.com/50x50?text=Casa" alt="Escudo Time Casa">
            <span id="nomeCasa" class="nome-time">Time A</span>
        </div>
        <span id="golsCasa" class="gols">0</span>
        <span class="gols">X</span>
        <span id="golsVisitante" class="gols">0</span>
        <div class="time-info">
            <span id="nomeVisitante" class="nome-time">Time B</span>
            <img id="escudoVisitante" src="https://via.placeholder.com/50x50?text=Vis" alt="Escudo Time Visitante">
        </div>
    </div>

    <div id="animacao-gol">
        <h1>GOOOOL!</h1>
        <img id="escudoAnimacaoGol" class="escudo-gol" src="" alt="Escudo do Time do Gol" style="display: none;">
    </div>

    <div id="cartoes-container">
        </div>

    <script>
        // Função para atualizar o placar na overlay
        function atualizarPlacar(data) {
            document.getElementById('nomeCasa').innerText = data.timeCasa || 'Time A';
            document.getElementById('nomeVisitante').innerText = data.timeVisitante || 'Time B';
            document.getElementById('golsCasa').innerText = data.golsCasa !== undefined ? data.golsCasa : '0';
            document.getElementById('golsVisitante').innerText = data.golsVisitante !== undefined ? data.golsVisitante : '0';

            // Atualiza os escudos, se os links forem fornecidos
            document.getElementById('escudoCasa').src = data.escudoCasa || 'https://via.placeholder.com/50x50?text=Casa';
            document.getElementById('escudoVisitante').src = data.escudoVisitante || 'https://via.placeholder.com/50x50?text=Vis';
        }

        // Função para mostrar a animação de gol
        // Adicionamos o parâmetro 'escudoSrc' para o caminho do escudo
        function mostrarAnimacaoGol(escudoSrc) {
            const animacaoGol = document.getElementById('animacao-gol');
            const escudoAnimacaoGol = document.getElementById('escudoAnimacaoGol');

            if (escudoSrc) {
                escudoAnimacaoGol.src = escudoSrc;
                escudoAnimacaoGol.style.display = 'block'; // Mostra o escudo
            } else {
                escudoAnimacaoGol.style.display = 'none'; // Esconde se não houver escudo
            }

            animacaoGol.classList.add('show');
            setTimeout(() => {
                animacaoGol.classList.remove('show');
                escudoAnimacaoGol.style.display = 'none'; // Garante que o escudo desaparece junto
            }, 3000); // Remove a classe 'show' após 3 segundos (duração da animação)
        }

        // Variável global para armazenar cartões ativos (evita duplicação visual e ajuda a gerenciar)
        let cartoesAtivos = {};

        // Função para adicionar um cartão
        function adicionarCartao(data) {
            const container = document.getElementById('cartoes-container');
            const cardId = `${data.jogador.replace(/\s/g, '-')}-${data.tipo}-${data.time}`; // ID único para o cartão

            // Verifica se o cartão já existe para evitar duplicação
            if (cartoesAtivos[cardId]) {
                console.warn(`Cartão para ${data.jogador} (${data.tipo}) já existe.`);
                // Opcional: Piscar o cartão existente ou atualizar se for o caso
                return;
            }

            const cartaoDiv = document.createElement('div');
            cartaoDiv.className = `cartao ${data.tipo}`;
            cartaoDiv.id = cardId; // Define o ID

            const escudoTimeSrc = data.time === 'casa' ? data.escudoCasa : data.escudoVisitante;
            const iconeCartaoSrc = data.tipo === 'amarelo' ? 'https://upload.wikimedia.org/wikipedia/commons/thumb/e/e0/Yellow_card.svg/1200px-Yellow_card.svg.png' : 'https://upload.wikimedia.org/wikipedia/commons/thumb/e/e5/Red_card.svg/1200px-Red_card.svg.png';

            cartaoDiv.innerHTML = `
                ${escudoTimeSrc ? `<img src="${escudoTimeSrc}" alt="Escudo Time" class="escudo-time">` : ''}
                <span>${data.jogador}</span>
                <img src="${iconeCartaoSrc}" alt="Cartão ${data.tipo}" class="icone-cartao">
            `;
            container.appendChild(cartaoDiv);

            cartoesAtivos[cardId] = cartaoDiv; // Adiciona ao controle de cartões ativos

            // Opcional: remover o cartão após alguns segundos
            setTimeout(() => {
                removerCartao(cardId);
            }, 8000); // Cartão desaparece após 8 segundos
        }

        // Função para remover um cartão (com animação)
        function removerCartao(cardId) {
            const cartaoDiv = document.getElementById(cardId);
            if (cartaoDiv) {
                cartaoDiv.style.animation = 'slideOutLeft 0.5s ease-out forwards';
                setTimeout(() => {
                    cartaoDiv.remove();
                    delete cartoesAtivos[cardId]; // Remove do controle de cartões ativos
                }, 500); // Espera a animação de saída terminar
            }
        }

        // Função para limpar todos os cartões (ex: ao final do jogo)
        function limparTodosCartoes() {
            const container = document.getElementById('cartoes-container');
            container.innerHTML = ''; // Remove todos os elementos filhos
            cartoesAtivos = {}; // Reseta o controle de cartões ativos
        }

        // --- Simulação de Recebimento de Dados (Você substituirá isso por WebSocket/API) ---

        // Exemplo: Simular uma atualização de placar
        setTimeout(() => {
            atualizarPlacar({
                timeCasa: 'Grêmio',
                golsCasa: 1,
                timeVisitante: 'Internacional',
                golsVisitante: 0,
                escudoCasa: 'https://upload.wikimedia.org/wikipedia/commons/e/e3/Escudo_do_Gr%C3%AAmio.png', // Exemplo de URL de escudo
                escudoVisitante: 'https://upload.wikimedia.org/wikipedia/commons/thumb/f/f1/Escudo_do_Sport_Club_Internacional.svg/1200px-Escudo_do_Sport_Club_Internacional.svg.png'
            });
        }, 1000);

        // Exemplo: Simular um gol do Time da Casa
        setTimeout(() => {
            mostrarAnimacaoGol('https://upload.wikimedia.org/wikipedia/commons/e/e3/Escudo_do_Gr%C3%AAmio.png');
            atualizarPlacar({
                timeCasa: 'Grêmio',
                golsCasa: 2,
                timeVisitante: 'Internacional',
                golsVisitante: 0,
                escudoCasa: 'https://upload.wikimedia.org/wikipedia/commons/e/e3/Escudo_do_Gr%C3%AAmio.png',
                escudoVisitante: 'https://upload.wikimedia.org/wikipedia/commons/thumb/f/f1/Escudo_do_Sport_Club_Internacional.svg/1200px-Escudo_do_Sport_Club_Internacional.svg.png'
            });
        }, 5000);

        // Exemplo: Simular um cartão amarelo para o time da casa
        setTimeout(() => {
            adicionarCartao({
                jogador: 'Jogador X',
                time: 'casa',
                tipo: 'amarelo',
                escudoCasa: 'https://upload.wikimedia.org/wikipedia/commons/e/e3/Escudo_do_Gr%C3%AAmio.png',
                escudoVisitante: 'https://upload.wikimedia.org/wikipedia/commons/thumb/f/f1/Escudo_do_Sport_Club_Internacional.svg/1200px-Escudo_do_Sport_Club_Internacional.svg.png'
            });
        }, 8000);

        // Exemplo: Simular um cartão vermelho para o time visitante
        setTimeout(() => {
            adicionarCartao({
                jogador: 'Jogador Y',
                time: 'visitante',
                tipo: 'vermelho',
                escudoCasa: 'https://upload.wikimedia.org/wikipedia/commons/e/e3/Escudo_do_Gr%C3%AAmio.png',
                escudoVisitante: 'https://upload.wikimedia.org/wikipedia/commons/thumb/f/f1/Escudo_do_Sport_Club_Internacional.svg/1200px-Escudo_do_Sport_Club_Internacional.svg.png'
            });
        }, 10000);

        // Exemplo: Simular um gol do Time Visitante
        setTimeout(() => {
            mostrarAnimacaoGol('https://upload.wikimedia.org/wikipedia/commons/thumb/f/f1/Escudo_do_Sport_Club_Internacional.svg/1200px-Escudo_do_Sport_Club_Internacional.svg.png');
            atualizarPlacar({
                timeCasa: 'Grêmio',
                golsCasa: 2,
                timeVisitante: 'Internacional',
                golsVisitante: 1,
                escudoCasa: 'https://upload.wikimedia.org/wikipedia/commons/e/e3/Escudo_do_Gr%C3%AAmio.png',
                escudoVisitante: 'https://upload.wikimedia.org/wikipedia/commons/thumb/f/f1/Escudo_do_Sport_Club_Internacional.svg/1200px-Escudo_do_Sport_Club_Internacional.svg.png'
            });
        }, 13000);

        // Exemplo: Limpar todos os cartões após um tempo
        setTimeout(() => {
            limparTodosCartoes();
        }, 20000); // Limpa cartões após 20 segundos
    </script>
</body>
</html>
